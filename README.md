## 属性面板<sup>SiYuan-Attributes-Panel</sup>

### 插件功能

目前没有任何设置项，开箱即用

通过这个插件可以实现：

1. 在文档下面显示一个属性面板，展示**文档级**自定义属性，支持增删改查
2. 支持暗黑模式
3. 目前就这样... 比较简单，因为最初是写给我自己使用的，后面根据大家的反馈再增加新功能，所以如果有需求一定要反馈给我！！！不然我也不知道该往哪个方向开发

### 为什么开发这个插件

虽然：

1. 官方开发者D大V大正在开发数据库，数据库能够一定程度上满足相关需求
2. 官方曾表态[不会开发类似功能](https://github.com/siyuan-note/siyuan/issues/9292#issuecomment-1736807915)，因为思源中，**文档**和**各种块**一样，都是**一等公民**，块也有属性，如果只支持文档属性面板无法达到设计统一

但是：

1. 自定义属性肯定是刚需：一些规整的信息需要被以键值对的方式存储，如果只是写在正文中，难以检索，难以统一
2. 文档毕竟和其他块还是有区别的，**文档是其他块的载体**，为文档属性提供一个额外的面板，可以实现更多自动化 / 高级操作

### 兼容性说明

开发版本为v2.11.4

因为本插件依赖的API非常基础，并不依赖于最新更新的特性，所以理论上更低的版本也能兼容，但是未经测试

| 版本号  | 电脑端 | 网页端 | 手机端 |
| --------- | -------- | -------- | -------- |
| v2.11.4 | ✅     | ✅     | 待测试 |

✅：经过测试，全部功能可用

### 数据安全声明

[出于对数据安全的绝对重视](https://ld246.com/article/1702808653385)，本插件特此声明插件使用的所有API，同时代码完全开源（未编译未混淆），欢迎大家报告安全问题

本插件依赖的API有且仅有：

1. `/api/attr/getBlockAttrs`：用于获取已有属性
2. `/api/attr/setBlockAttrs`：用于设置属性
3. `/api/block/getBlockBreadcrumb`：未来可以通过悬浮面板，支持对任意块属性的增删改查，通过这个API`获取文档路径和文档内容`以定位（目前没用）
4. `EventBus`监听：`loaded-protyle-static`，即页面打开操作，以在适当的时机插入属性面板

#### 插件权限

* **关于数据**：本插件对您数据的修改仅限于**在用户操作下**，根据用户指示，对指定块的属性做出指定的修改，不会修改其他任何内容
* **关于UI**：本插件对用户界面的修改仅限于在文档标题下增加一个属性面板，对其他部分均无任何影响
* **关于联网**：本插件完全本地，不包括任何外网通信

### 实现原理

为了快速开发，本插件使用如下技术栈：

框架Vue，组件库[TDesign](https://tdesign.tencent.com/)，其中自定义组件的支持完全来自于组件库

### 支持与反馈

有多种反馈方法任您选择：

1. 在QQ群中找到我：思源笔记官方群一群二群三群里都能找到我（QQ：2294227991），您可以直接at我或者加我好友，但是QQ不常用，不保证一定能看到消息，更稳妥的话可以选择下面三个方法
2. 通过微信：您可以直接扫描下面这个二维码添加我的微信，对您来说，这样是最快最高效的方式，但是我比较忙，可能回复的不会那么及时在此表示抱歉

<details>

<summary>微信二维码（如果看不到图请搜索 TransMux）</summary>

![]([./asset/Wechat.jpg](https://assets.b3logfile.com/siyuan/1613565605390/assets/image-20231229141811-73f5v1k.png))

</details>

3. 通过Github Issue：您可以直接提一个Issue，这样的话便于大家一起讨论，但是可能及时性不会那么高
4. 或者您是大佬，直接提一个PR进行改进：非常欢迎，荣幸之至！感谢您的贡献！

### 下一步

* [ ] 支持管理面板，支持管理字段类型，模板，条件，操作

  * [ ] 模板：满足一定条件的文档可以自动展示特定字段（比如`参考文献`下的文档自动展示`arxiv`字段）
  * [ ] 操作：支持当属性改变时触发自定义 / 外部钩子（比如修改`arxiv`字段时，自动抓取论文其他信息进行填充，自动抓取pdf文档，插入 / 翻译）
  * [ ] 外部字段：支持其他插件添加对自定义字段，属性，类型的支持
* [ ] 创建的用户字段持久化，支持检索

  * [ ] 创建过的字段可以自动检索